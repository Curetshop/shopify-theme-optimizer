<div class="reviews-slider" style="
  margin-top: {{ section.settings.margin_top }}px; 
  margin-bottom: {{ section.settings.margin_bottom }}px; 
  box-shadow: {{ section.settings.box_shadow }};
  border-radius: {{ section.settings.border_radius }}px;
">
  <div class="reviews-container">
    {% for block in section.blocks %}
      <!-- Bloque de reseña -->
      <div class="review">
        {% if block.settings.review_image %}
          <img src="{{ block.settings.review_image | img_url: '100x100' }}" alt="{{ block.settings.review_author }}" class="review-img">
        {% endif %}
        <p class="review-text">{{ block.settings.review_text }}</p>
        <p class="review-name">{{ block.settings.review_author }} <span class="stars">★★★★★</span></p>
      </div>
    {% endfor %}
  </div>
</div>

<style>
  /* Contenedor principal */
  .reviews-slider {
    overflow: hidden;
    background-color: #1b4b72;
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
  }

  /* Contenedor de las reseñas */
  .reviews-container {
    display: flex;
    gap: 20px;
    animation: scroll-smooth {{ section.settings.scroll_speed }}s linear infinite;
  }

  /* Reseña individual */
  .review {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 300px;
    color: #ffffff;
    text-align: center;
    opacity: 0; /* Empieza invisible */
    animation: fade-in-out {{ section.settings.scroll_speed }}s linear infinite;
  }

  /* Imagen del usuario */
  .review-img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin-bottom: 10px;
  }

  /* Texto de la reseña */
  .review-text {
    font-size: 16px;
    margin-bottom: 10px;
  }

  /* Nombre y estrellas */
  .review-name {
    font-size: 14px;
    font-weight: bold;
    margin-top: 5px;
  }

  /* Estrellas */
  .stars {
    color: #FFD700;
  }

  /* Animaciones */
  @keyframes scroll-smooth {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-100%);
    }
  }

  @keyframes fade-in-out {
    0%, 20% {
      opacity: 0; /* Empieza invisible */
      transform: scale(0.9); /* Ligeramente más pequeño */
    }
    25%, 75% {
      opacity: 1; /* Completamente visible */
      transform: scale(1); /* Tamaño original */
    }
    80%, 100% {
      opacity: 0; /* Desvanece al final */
      transform: scale(0.9); /* Reduce ligeramente el tamaño */
    }
  }
</style>

<script>
  // Duplicar las reseñas para un desplazamiento infinito
  const reviewsContainer = document.querySelector('.reviews-container');
  reviewsContainer.innerHTML += reviewsContainer.innerHTML;
</script>

{% schema %}
{
  "name": "Slider de Reseñas",
  "settings": [
    {
      "type": "number",
      "id": "margin_top",
      "label": "Espacio superior (px)",
      "default": 20
    },
    {
      "type": "number",
      "id": "margin_bottom",
      "label": "Espacio inferior (px)",
      "default": 20
    },
    {
      "type": "text",
      "id": "box_shadow",
      "label": "Sombra (CSS box-shadow)",
      "default": "0px 4px 6px rgba(0, 0, 0, 0.1)"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Curvatura de bordes (px)",
      "min": 0,
      "max": 50,
      "default": 10
    },
    {
      "type": "range",
      "id": "scroll_speed",
      "label": "Velocidad del slider (segundos)",
      "min": 5,
      "max": 20,
      "step": 1,
      "default": 10
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Reseña",
      "settings": [
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Texto de la reseña",
          "default": "Excelente servicio y calidad."
        },
        {
          "type": "text",
          "id": "review_author",
          "label": "Autor de la reseña",
          "default": "Juan Pérez"
        },
        {
          "type": "image_picker",
          "id": "review_image",
          "label": "Imagen del autor"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Slider de Reseñas",
      "category": "Marketing"
    }
  ]
}
{% endschema %}
